---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

// ãƒ‡ãƒãƒƒã‚°æƒ…å ±ã‚’è¿½åŠ 
console.log('ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’èª­ã¿è¾¼ã¿ä¸­...');

// Markdownãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿
const tripInfo = await getCollection('trip');
const scheduleData = await getCollection('trip');
const spotsData = await getCollection('trip');

console.log('tripInfo:', tripInfo);
console.log('scheduleData:', scheduleData);
console.log('spotsData:', spotsData);

// ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
const info = tripInfo.find(item => item.id === 'info.md');
const schedule = scheduleData.find(item => item.id === 'schedule.md');
const spots = spotsData.find(item => item.id === 'spots.md');
const accommodation = tripInfo.find(item => item.id === 'accommodation.md');

// ãƒ‡ãƒãƒƒã‚°æƒ…å ±ã‚’è¿½åŠ 
console.log('tripInfo:', tripInfo);
console.log('accommodation:', accommodation);

// ãƒ‡ãƒ¼ã‚¿ãŒå­˜åœ¨ã—ãªã„å ´åˆã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
if (!info) {
  throw new Error('info.mdãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
}
if (!schedule) {
  throw new Error('schedule.mdãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
}
if (!spots) {
  throw new Error('spots.mdãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
}
if (!accommodation) {
  console.warn('accommodation.mdãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
}

// ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’è§£æ
const scheduleContent = schedule.body;
const day1Match = scheduleContent.match(/# ä¸€æ—¥ç›®\n([\s\S]*?)(?=# äºŒæ—¥ç›®|$)/);
const day2Match = scheduleContent.match(/# äºŒæ—¥ç›®\n([\s\S]*?)$/);

const parseScheduleItems = (content: string) => {
  const items: Array<{
    time: string;
    title: string;
    details: string[];
    participants: string;
    link: string;
  }> = [];
  
  // ã‚ˆã‚ŠæŸ”è»Ÿãªæ­£è¦è¡¨ç¾ã§æ™‚é–“ã¨ã‚¿ã‚¤ãƒˆãƒ«ã‚’ãƒãƒƒãƒï¼ˆ~ã‚’å«ã‚€æ™‚é–“å½¢å¼ã‚‚å¯¾å¿œï¼‰
  const scheduleMatches = content.match(/^## ([\d:~]+) - (.+)$/gm);
  
  if (scheduleMatches) {
    for (const match of scheduleMatches) {
      const timeMatch = match.match(/^## ([\d:~]+) - (.+)$/);
      if (timeMatch) {
        const time = timeMatch[1];
        const title = timeMatch[2];
        
        // ã“ã®é …ç›®ã®è©³ç´°ã‚’å–å¾—
        const itemStart = content.indexOf(match);
        const nextItemMatch = content.substring(itemStart + match.length).match(/^## /m);
        const itemEnd = nextItemMatch ? itemStart + match.length + nextItemMatch.index! : content.length;
        const itemContent = content.substring(itemStart, itemEnd);
        
        const details: string[] = [];
        let participants = '';
        let link = '';
        
        // è©³ç´°æƒ…å ±ã‚’è§£æ
        const detailMatches = itemContent.match(/^- \*\*([^:]+)\*\*: (.+)$/gm);
        if (detailMatches) {
          for (const detailMatch of detailMatches) {
            const detailParts = detailMatch.match(/^- \*\*([^:]+)\*\*: (.+)$/);
            if (detailParts) {
              const key = detailParts[1];
              const value = detailParts[2];
              
              if (key === 'å‚åŠ è€…') {
                participants = value;
              } else if (key === 'è©³ç´°') {
                details.push(value);
              } else if (key === 'ãƒªãƒ³ã‚¯') {
                link = value;
              }
            }
          }
        }
        
        console.log('Parsed item:', { time, title, details, participants, link });
        items.push({
          time,
          title,
          details,
          participants,
          link
        });
      }
    }
  }
  
  return items;
};

const day1Items = day1Match ? parseScheduleItems(day1Match[1]) : [];
const day2Items = day2Match ? parseScheduleItems(day2Match[1]) : [];

// ãƒ‡ãƒãƒƒã‚°æƒ…å ±ã‚’è¿½åŠ 
console.log('Day 1 Items:', day1Items);
console.log('Day 2 Items:', day2Items);

// è¦³å…‰ã‚¹ãƒãƒƒãƒˆãƒ‡ãƒ¼ã‚¿ã‚’è§£æ
const spotsContent = spots.body;
const spotsSections = spotsContent.split(/# /).filter((section: string) => section.trim());

const parseSpots = (content: string) => {
  const spots: Array<{
    title: string;
    icon: string;
    backgroundImage: string;
    description: string;
    link: string;
    category: string;
    subSpots: string[];
    isReturnSpot: boolean;
  }> = [];
  
  // ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿éƒ¨åˆ†ã‚’é™¤å¤–ã—ã¦ã‚¹ãƒãƒƒãƒˆéƒ¨åˆ†ã®ã¿ã‚’å–å¾—
  const contentWithoutMeta = content.replace(/^---[\s\S]*?---\n/, '');
  
  // å¸°ã‚Šé“ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ä½ç½®ã‚’ç‰¹å®š
  const returnSectionIndex = contentWithoutMeta.indexOf('# å¸°ã‚Šé“');
  
  // ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã”ã¨ã«åˆ†å‰²
  const sections = contentWithoutMeta.split('## ').filter((section: string) => section.trim());
  
  for (const section of sections) {
    const lines = section.split('\n');
    const title = lines[0].trim();
    
    // ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆ# ã§å§‹ã¾ã‚‹è¡Œï¼‰ã‚’ã‚¹ã‚­ãƒƒãƒ—
    if (title.startsWith('#')) {
      continue;
    }
    
    // ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒå¸°ã‚Šé“ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®å¾Œã«ã‚ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
    const sectionStartIndex = contentWithoutMeta.indexOf(section);
    const isReturnSpot = returnSectionIndex !== -1 && sectionStartIndex > returnSectionIndex;
    
    const spot: {
      title: string;
      icon: string;
      backgroundImage: string;
      description: string;
      link: string;
      category: string;
      subSpots: string[];
      isReturnSpot: boolean;
    } = {
      title,
      icon: 'ğŸ›ï¸',
      backgroundImage: '',
      description: '',
      link: '',
      category: '',
      subSpots: [],
      isReturnSpot
    };
    
    for (const line of lines.slice(1)) {
      if (line.includes('**ã‚¢ã‚¤ã‚³ãƒ³**:')) {
        spot.icon = line.split('**ã‚¢ã‚¤ã‚³ãƒ³**:')[1].trim();
      } else if (line.includes('**èƒŒæ™¯ç”»åƒ**:')) {
        spot.backgroundImage = line.split('**èƒŒæ™¯ç”»åƒ**:')[1].trim();
      } else if (line.includes('**èª¬æ˜**:')) {
        spot.description = line.split('**èª¬æ˜**:')[1].trim();
      } else if (line.includes('**ãƒªãƒ³ã‚¯**:')) {
        spot.link = line.split('**ãƒªãƒ³ã‚¯**:')[1].trim();
      } else if (line.includes('**ã‚«ãƒ†ã‚´ãƒª**:')) {
        spot.category = line.split('**ã‚«ãƒ†ã‚´ãƒª**:')[1].trim();
      } else if (line.includes('**ã‚¹ãƒãƒƒãƒˆ**:')) {
        // ã‚µãƒ–ã‚¹ãƒãƒƒãƒˆã®å‡¦ç†
        const subSpotsMatch = section.match(/\*\*ã‚¹ãƒãƒƒãƒˆ\*\*:\n((?:  - .*\n?)*)/);
        if (subSpotsMatch) {
          const subSpotsLines = subSpotsMatch[1].split('\n').filter((line: string) => line.trim().startsWith('  - '));
          spot.subSpots = subSpotsLines.map((line: string) => line.trim().substring(4));
        }
      }
    }
    
    if (spot.title && spot.description) {
      spots.push(spot);
    }
  }
  
  return spots;
};

const allSpots = parseSpots(spotsContent);
const mainSpots = allSpots.filter(spot => !spot.isReturnSpot);
const returnSpots = allSpots.filter(spot => spot.isReturnSpot);

// ãƒ‡ãƒãƒƒã‚°æƒ…å ±ã‚’è¿½åŠ 
console.log('All Spots:', allSpots);
console.log('Main Spots:', mainSpots);
console.log('Return Spots:', returnSpots);
---

<Layout title={info.data.title}>
  <!-- ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
  <section class="relative h-screen flex items-center justify-center overflow-hidden">
    <!-- èƒŒæ™¯ç”»åƒã¨ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ -->
    <div class="absolute inset-0 bg-gradient-to-r from-blue-900/80 to-purple-900/80 z-10"></div>
    <div class="absolute inset-0 bg-cover bg-center bg-no-repeat" style={`background-image: url('${info.data.heroImage}')`}></div>
    
    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <div class="relative z-20 text-center text-white px-4">
      <h1 class="text-6xl md:text-8xl font-bold mb-6 animate-fade-in">
        ğŸ—» {info.data.title.split(' ')[0]}
      </h1>
      <h2 class="text-4xl md:text-6xl font-light mb-8 animate-fade-in-delay">
        {info.data.title.split(' ').slice(1).join(' ')}
      </h2>
      <p class="text-xl md:text-2xl mb-12 opacity-90 animate-fade-in-delay-2">
        {info.data.subtitle}
      </p>
      <div class="flex flex-wrap justify-center gap-6 text-sm md:text-base">
        <span class="bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full">ğŸ“… {info.data.date}</span>
        <span class="bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full">ğŸ“ {info.data.location}</span>
        <span class="bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full">ğŸ‘¥ {info.data.participants}</span>
      </div>
    </div>
    
    <!-- ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ -->
    <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 z-20 animate-bounce">
      <div class="w-6 h-10 border-2 border-white rounded-full flex justify-center">
        <div class="w-1 h-3 bg-white rounded-full mt-2 animate-pulse"></div>
      </div>
    </div>
  </section>

  <div class="container mx-auto px-4 py-16">
    <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
    <nav class="sticky top-0 z-50 bg-white/95 backdrop-blur-sm shadow-lg rounded-full mx-auto max-w-4xl mb-16">
      <div class="flex justify-center space-x-8 p-6">
        <a href="#schedule" class="text-blue-600 hover:text-blue-800 font-semibold transition-all duration-300 hover:scale-110 flex items-center">
          <span class="text-2xl mr-2">ğŸ“…</span>
          ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
        </a>
        <a href="#spots" class="text-blue-600 hover:text-blue-800 font-semibold transition-all duration-300 hover:scale-110 flex items-center">
          <span class="text-2xl mr-2">ğŸ›ï¸</span>
          è¦³å…‰ã‚¹ãƒãƒƒãƒˆ
        </a>
        <a href="#info" class="text-blue-600 hover:text-blue-800 font-semibold transition-all duration-300 hover:scale-110 flex items-center">
          <span class="text-2xl mr-2">â„¹ï¸</span>
          åŸºæœ¬æƒ…å ±
        </a>
        <a href="#accommodation" class="text-blue-600 hover:text-blue-800 font-semibold transition-all duration-300 hover:scale-110 flex items-center">
          <span class="text-2xl mr-2">ğŸ </span>
          å®¿æ³Šæƒ…å ±ï¼ˆæ¦‚è¦ï¼‰
        </a>
        <a href="/accommodation/" class="text-purple-600 hover:text-purple-800 font-semibold transition-all duration-300 hover:scale-110 flex items-center">
          <span class="text-2xl mr-2">ğŸ </span>
          å®¿æ³Šæƒ…å ±ï¼ˆè©³ç´°ãƒšãƒ¼ã‚¸ï¼‰
        </a>
      </div>
    </nav>

    <!-- ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <section id="schedule" class="mb-24">
      <div class="text-center mb-16">
        <h2 class="text-5xl font-bold text-gray-800 mb-4">ğŸ“… ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</h2>
        <p class="text-xl text-gray-600">{schedule.data.description}</p>
      </div>
      
      <!-- ä¸€æ—¥ç›® -->
      <div class="bg-gradient-to-br from-blue-50 to-indigo-100 rounded-3xl shadow-2xl p-8 mb-12 transform hover:scale-105 transition-all duration-500">
        <div class="flex items-center mb-8">
          <div class="bg-blue-600 text-white rounded-full w-16 h-16 flex items-center justify-center text-2xl font-bold mr-6">
            1
          </div>
          <h3 class="text-3xl font-bold text-blue-600">ä¸€æ—¥ç›®</h3>
        </div>
        <div class="relative">
          {/* ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã®ç¸¦ç·š */}
          <div class="absolute left-8 top-0 bottom-0 w-0.5 bg-blue-200"></div>
          
          <div class="space-y-8">
            {day1Items.filter(item => item.title && item.time).map((item, index) => (
              <div class="relative flex items-start">
                {/* ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã®ç‚¹ã¨ç·š */}
                <div class="flex-shrink-0 w-16 h-16 flex items-center justify-center relative">
                  <div class={`w-4 h-4 rounded-full border-4 border-white shadow-lg ${index % 4 === 0 ? 'bg-blue-500' : index % 4 === 1 ? 'bg-green-500' : index % 4 === 2 ? 'bg-purple-500' : 'bg-orange-500'}`}></div>
                  {/* æ¬¡ã®é …ç›®ã¸ã®ç·šï¼ˆæœ€å¾Œã®é …ç›®ä»¥å¤–ï¼‰ */}
                  {index < day1Items.filter(item => item.title && item.time).length - 1 && (
                    <div class="absolute top-16 left-1/2 transform -translate-x-1/2 w-0.5 h-8 bg-blue-200"></div>
                  )}
                </div>
                
                {/* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */}
                <div class="ml-6 flex-1 bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-shadow">
                  <div class="flex items-center mb-4">
                    <span class={`font-bold text-lg ${index % 4 === 0 ? 'text-blue-600' : index % 4 === 1 ? 'text-green-600' : index % 4 === 2 ? 'text-purple-600' : 'text-orange-600'}`}>{item.time}</span>
                  </div>
                  <h4 class="text-xl font-semibold mb-3">{item.title}</h4>
                  <p class="text-gray-600 mb-3">{item.details.join(', ')}</p>
                  {item.link && (
                    <a href={item.link} target="_blank" class="text-blue-600 hover:underline text-sm">
                      è©³ç´°ã‚’è¦‹ã‚‹ â†’
                    </a>
                  )}
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>

      <!-- äºŒæ—¥ç›® -->
      <div class="bg-gradient-to-br from-green-50 to-emerald-100 rounded-3xl shadow-2xl p-8 transform hover:scale-105 transition-all duration-500">
        <div class="flex items-center mb-8">
          <div class="bg-green-600 text-white rounded-full w-16 h-16 flex items-center justify-center text-2xl font-bold mr-6">
            2
          </div>
          <h3 class="text-3xl font-bold text-green-600">äºŒæ—¥ç›®</h3>
        </div>
        <div class="relative">
          {/* ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã®ç¸¦ç·š */}
          <div class="absolute left-8 top-0 bottom-0 w-0.5 bg-green-200"></div>
          
          <div class="space-y-8">
            {day2Items.filter(item => item.title && item.time).map((item, index) => (
              <div class="relative flex items-start">
                {/* ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã®ç‚¹ã¨ç·š */}
                <div class="flex-shrink-0 w-16 h-16 flex items-center justify-center relative">
                  <div class={`w-4 h-4 rounded-full border-4 border-white shadow-lg ${index % 4 === 0 ? 'bg-green-500' : index % 4 === 1 ? 'bg-red-500' : index % 4 === 2 ? 'bg-blue-500' : 'bg-purple-500'}`}></div>
                  {/* æ¬¡ã®é …ç›®ã¸ã®ç·šï¼ˆæœ€å¾Œã®é …ç›®ä»¥å¤–ï¼‰ */}
                  {index < day2Items.filter(item => item.title && item.time).length - 1 && (
                    <div class="absolute top-16 left-1/2 transform -translate-x-1/2 w-0.5 h-8 bg-green-200"></div>
                  )}
                </div>
                
                {/* ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */}
                <div class="ml-6 flex-1 bg-white rounded-2xl p-6 shadow-lg hover:shadow-xl transition-shadow">
                  <div class="flex items-center mb-4">
                    <span class={`font-bold text-lg ${index % 4 === 0 ? 'text-green-600' : index % 4 === 1 ? 'text-red-600' : index % 4 === 2 ? 'text-blue-600' : 'text-purple-600'}`}>{item.time}</span>
                  </div>
                  <h4 class="text-xl font-semibold mb-3">{item.title}</h4>
                  <p class="text-gray-600 mb-3">{item.details.join(', ')}</p>
                  {item.link && (
                    <a href={item.link} target="_blank" class="text-blue-600 hover:underline text-sm">
                      è©³ç´°ã‚’è¦‹ã‚‹ â†’
                    </a>
                  )}
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
    </section>

    <!-- è¦³å…‰ã‚¹ãƒãƒƒãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <section id="spots" class="mb-24">
      <div class="text-center mb-16">
        <h2 class="text-5xl font-bold text-gray-800 mb-4">ğŸ›ï¸ è¦³å…‰ã‚¹ãƒãƒƒãƒˆ</h2>
        <p class="text-xl text-gray-600">{spots.data.description}</p>
      </div>
      
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        {mainSpots.map((spot, index) => (
          <div class="group bg-white rounded-3xl shadow-xl overflow-hidden transform hover:scale-105 transition-all duration-500">
            <div class={`h-48 flex items-center justify-center relative overflow-hidden ${
              spot.backgroundImage ? 'bg-cover bg-center' : 
              index % 6 === 0 ? 'bg-gradient-to-br from-blue-400 to-purple-600' :
              index % 6 === 1 ? 'bg-gradient-to-br from-pink-400 to-red-600' :
              index % 6 === 2 ? 'bg-gradient-to-br from-green-400 to-blue-600' :
              index % 6 === 3 ? 'bg-gradient-to-br from-purple-400 to-indigo-600' :
              index % 6 === 4 ? 'bg-gradient-to-br from-yellow-400 to-orange-600' :
              'bg-gradient-to-br from-red-400 to-pink-600'
            }`} style={spot.backgroundImage ? `background-image: url('${spot.backgroundImage}')` : ''}>
              {spot.backgroundImage ? (
                <div class="absolute inset-0 bg-black/30 flex items-center justify-center">
                  <span class="text-6xl text-white drop-shadow-lg">{spot.icon}</span>
                </div>
              ) : (
                <span class="text-6xl">{spot.icon}</span>
              )}
            </div>
            <div class="p-6">
              <h3 class="text-xl font-bold text-gray-800 mb-4">{spot.title}</h3>
              <p class="text-gray-600 mb-4">{spot.description}</p>
              {spot.subSpots && spot.subSpots.length > 0 && (
                <ul class="text-gray-600 mb-4 space-y-2 text-sm">
                  {spot.subSpots.map((subSpot: string) => (
                    <li>â€¢ {subSpot}</li>
                  ))}
                </ul>
              )}
              {spot.link && (
                <a href={spot.link} target="_blank" class="inline-flex items-center text-blue-600 hover:text-blue-800 font-semibold transition-colors">
                  è©³ç´°ã‚’è¦‹ã‚‹
                  <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                  </svg>
                </a>
              )}
            </div>
          </div>
        ))}
      </div>

      <!-- å¸°ã‚Šé“ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
      {returnSpots.length > 0 && (
        <div class="mt-20">
          <div class="text-center mb-12">
            <h3 class="text-4xl font-bold text-gray-800 mb-4">ğŸ›£ï¸ å¸°ã‚Šé“</h3>
            <p class="text-xl text-gray-600">å¸°ã‚Šã‚‚æ¥½ã—ã„ã‚¹ãƒãƒƒãƒˆ</p>
          </div>
          <div class="grid md:grid-cols-2 gap-8">
            {returnSpots.map((spot, index) => (
              <div class="group bg-white rounded-3xl shadow-xl overflow-hidden transform hover:scale-105 transition-all duration-500">
                <div class={`h-48 flex items-center justify-center relative overflow-hidden ${
                  spot.backgroundImage ? 'bg-cover bg-center' : 
                  index % 2 === 0 ? 'bg-gradient-to-br from-gray-400 to-gray-600' : 'bg-gradient-to-br from-yellow-400 to-amber-600'
                }`} style={spot.backgroundImage ? `background-image: url('${spot.backgroundImage}')` : ''}>
                  {spot.backgroundImage ? (
                    <div class="absolute inset-0 bg-black/30 flex items-center justify-center">
                      <span class="text-6xl text-white drop-shadow-lg">{spot.icon}</span>
                    </div>
                  ) : (
                    <span class="text-6xl">{spot.icon}</span>
                  )}
                </div>
                <div class="p-6">
                  <h4 class="text-xl font-bold text-gray-800 mb-4">{spot.title}</h4>
                  <p class="text-gray-600 mb-4">{spot.description}</p>
                  {spot.link && (
                    <a href={spot.link} target="_blank" class="inline-flex items-center text-blue-600 hover:text-blue-800 font-semibold transition-colors">
                      è©³ç´°ã‚’è¦‹ã‚‹
                      <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                      </svg>
                    </a>
                  )}
                </div>
              </div>
            ))}
          </div>
        </div>
              )}

        <!-- ãƒãƒƒãƒ—ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="mt-20">
          <div class="text-center mb-12">
            <h3 class="text-4xl font-bold text-gray-800 mb-4">ğŸ—ºï¸ è¦³å…‰ãƒãƒƒãƒ—</h3>
            <p class="text-xl text-gray-600">é£›é¨¨é«˜å±±ã®è¦³å…‰ã‚¹ãƒãƒƒãƒˆãƒãƒƒãƒ—</p>
          </div>
          
          <div class="bg-white rounded-3xl shadow-2xl overflow-hidden transform hover:scale-105 transition-all duration-500">
            <div class="relative w-full h-96 md:h-[600px]">
              <iframe 
                src="https://www.google.com/maps/d/u/0/embed?mid=13SyNhKPb3h3C7nmrzGpuFpqcLrHOAbU&ehbc=2E312F" 
                class="w-full h-full border-0"
                title="é£›é¨¨é«˜å±±è¦³å…‰ãƒãƒƒãƒ—"
                loading="lazy"
                allowfullscreen
              ></iframe>
            </div>
            
            <!-- ãƒãƒƒãƒ—ã®èª¬æ˜ -->
            <div class="p-6 bg-gradient-to-r from-blue-50 to-indigo-50">
              <div class="flex items-center justify-between">
                <div>
                  <h4 class="text-lg font-semibold text-gray-800 mb-2">ğŸ—ºï¸ è¦³å…‰ã‚¹ãƒãƒƒãƒˆãƒãƒƒãƒ—</h4>
                  <p class="text-gray-600 text-sm">å„è¦³å…‰ã‚¹ãƒãƒƒãƒˆã®ä½ç½®ã¨ãƒ«ãƒ¼ãƒˆã‚’ç¢ºèªã§ãã¾ã™</p>
                </div>
                <a 
                  href="https://www.google.com/maps/d/u/0/viewer?mid=13SyNhKPb3h3C7nmrzGpuFpqcLrHOAbU" 
                  target="_blank" 
                  class="inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-semibold"
                >
                  å¤§ããªãƒãƒƒãƒ—ã§è¦‹ã‚‹
                  <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                  </svg>
                </a>
              </div>
            </div>
          </div>
        </div>

      </section>

    <!-- åŸºæœ¬æƒ…å ±ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <section id="info" class="mb-24">
      <div class="text-center mb-16">
        <h2 class="text-5xl font-bold text-gray-800 mb-4">â„¹ï¸ åŸºæœ¬æƒ…å ±</h2>
        <p class="text-xl text-gray-600">æ—…è¡Œã®è©³ç´°æƒ…å ±</p>
      </div>
      
      <div class="grid md:grid-cols-2 gap-12">
        <div class="bg-gradient-to-br from-blue-50 to-indigo-100 rounded-3xl shadow-2xl p-8 transform hover:scale-105 transition-all duration-500">
          <h3 class="text-2xl font-bold text-blue-600 mb-6 flex items-center">
            <span class="text-3xl mr-3">ğŸ“‹</span>
            æ—…è¡Œæ¦‚è¦
          </h3>
          <ul class="space-y-4 text-gray-700">
            <li class="flex items-center">
              <span class="w-3 h-3 bg-blue-500 rounded-full mr-4"></span>
              <strong class="mr-2">æœŸé–“:</strong> {info.data.duration}
            </li>
            <li class="flex items-center">
              <span class="w-3 h-3 bg-blue-500 rounded-full mr-4"></span>
              <strong class="mr-2">ç›®çš„åœ°:</strong> {info.data.location}
            </li>
            <li class="flex items-center">
              <span class="w-3 h-3 bg-blue-500 rounded-full mr-4"></span>
              <strong class="mr-2">å‚åŠ è€…:</strong> {info.data.participants}
            </li>
            <li class="flex items-center">
              <span class="w-3 h-3 bg-blue-500 rounded-full mr-4"></span>
              <strong class="mr-2">äº¤é€šæ‰‹æ®µ:</strong> {info.data.transportation}
            </li>
          </ul>
        </div>
        
        <div class="bg-gradient-to-br from-red-50 to-pink-100 rounded-3xl shadow-2xl p-8 transform hover:scale-105 transition-all duration-500">
          <h3 class="text-2xl font-bold text-red-600 mb-6 flex items-center">
            <span class="text-3xl mr-3">âš ï¸</span>
            æ³¨æ„äº‹é …
          </h3>
          <ul class="space-y-4 text-gray-700">
            <li class="flex items-start">
              <span class="w-3 h-3 bg-red-500 rounded-full mr-4 mt-2"></span>
              é«˜å±±é™£å±‹é›†åˆæ™‚ã¯å…¨å“¡ã§è¡Œå‹•
            </li>
            <li class="flex items-start">
              <span class="w-3 h-3 bg-red-500 rounded-full mr-4 mt-2"></span>
              å„è‡ªã®è²¬ä»»ã§è¦³å…‰ã‚¹ãƒãƒƒãƒˆã‚’é¸æŠ
            </li>
            <li class="flex items-start">
              <span class="w-3 h-3 bg-red-500 rounded-full mr-4 mt-2"></span>
              è§£æ•£æ™‚é–“ã‚’å®ˆã‚‹
            </li>
            <li class="flex items-start">
              <span class="w-3 h-3 bg-red-500 rounded-full mr-4 mt-2"></span>
              å®‰å…¨ç¬¬ä¸€ã§è¡Œå‹•
            </li>
          </ul>
        </div>
      </div>
    </section>

    <!-- å®¿æ³Šæƒ…å ±ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    {accommodation && (
      <section id="accommodation" class="mb-24">
        <div class="text-center mb-16">
          <h2 class="text-5xl font-bold text-gray-800 mb-4">ğŸ  å®¿æ³Šæƒ…å ±</h2>
          <p class="text-xl text-gray-600">{accommodation.data.description}</p>
        </div>
        
        <div class="bg-gradient-to-br from-purple-50 to-pink-100 rounded-3xl shadow-2xl p-8 transform hover:scale-105 transition-all duration-500">
          <div class="text-center mb-8">
            <h3 class="text-3xl font-bold text-purple-600 mb-4 flex items-center justify-center">
              <span class="text-4xl mr-3">ğŸ </span>
              {accommodation.data.subtitle}
            </h3>
            <p class="text-lg text-gray-600 mb-6">å¤æ°‘å®¶ã‚’ãƒªãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã—ãŸå®¿ã§ã€é£›é¨¨ã®ä¼çµ±çš„ãªé›°å›²æ°—ã‚’æ¥½ã—ã‚ã¾ã™</p>
          </div>
          
          <div class="grid md:grid-cols-3 gap-6 mb-8">
            <div class="bg-white/50 rounded-lg p-4 text-center">
              <div class="text-3xl mb-2">ğŸ‘¥</div>
              <h4 class="font-bold text-purple-600 mb-1">å®¿æ³Šäººæ•°</h4>
              <p class="text-gray-700">{accommodation.data.participants}</p>
            </div>
            <div class="bg-white/50 rounded-lg p-4 text-center">
              <div class="text-3xl mb-2">ğŸ“…</div>
              <h4 class="font-bold text-purple-600 mb-1">å®¿æ³ŠæœŸé–“</h4>
              <p class="text-gray-700">{accommodation.data.duration}</p>
            </div>
            <div class="bg-white/50 rounded-lg p-4 text-center">
              <div class="text-4xl mb-2">ğŸ“</div>
              <h4 class="font-bold text-purple-600 mb-1">å ´æ‰€</h4>
              <p class="text-gray-700">{accommodation.data.location}</p>
            </div>
          </div>
          
          <div class="grid md:grid-cols-2 gap-6 mb-8">
            <div class="bg-white/50 rounded-lg p-4">
              <h4 class="text-lg font-bold text-purple-600 mb-3">ğŸ—ï¸ è¨­å‚™</h4>
              <ul class="space-y-2 text-sm text-gray-700">
                <li class="flex items-center">
                  <span class="w-2 h-2 bg-purple-500 rounded-full mr-3"></span>
                  <strong>ã‚­ãƒƒãƒãƒ³:</strong> å®Œå‚™ï¼ˆè‡ªç‚Šå¯èƒ½ï¼‰
                </li>
                <li class="flex items-center">
                  <span class="w-2 h-2 bg-purple-500 rounded-full mr-3"></span>
                  <strong>æ¸©æ³‰:</strong> è¿‘éš£ã®éŠ­æ¹¯åˆ©ç”¨å¯èƒ½
                </li>
                <li class="flex items-center">
                  <span class="w-2 h-2 bg-purple-500 rounded-full mr-3"></span>
                  <strong>Wi-Fi SSID:</strong> TP-Link_EBB0
                </li>
                <li class="flex items-center">
                  <span class="w-2 h-2 bg-purple-500 rounded-full mr-3"></span>
                  <strong>Wi-Fi ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰:</strong> 93055680
                </li>
                <li class="flex items-center">
                  <span class="w-2 h-2 bg-purple-500 rounded-full mr-3"></span>
                  <strong>é§è»Šå ´:</strong> è¿‘ãã®ã‚³ã‚¤ãƒ³ãƒ‘ãƒ¼ã‚­ãƒ³ã‚°ã‚’åˆ©ç”¨ã—ã¦ãã ã•ã„ã€‚
                </li>
              </ul>
            </div>
            
            <div class="bg-white/50 rounded-lg p-4">
              <h4 class="text-lg font-bold text-purple-600 mb-3">âœ¨ ç‰¹å¾´</h4>
              <ul class="space-y-2 text-sm text-gray-700">
                <li class="flex items-start">
                  <span class="w-2 h-2 bg-purple-500 rounded-full mr-3 mt-2"></span>
                  å¤æ°‘å®¶ã‚’ãƒªãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã—ãŸå®¿
                </li>
                <li class="flex items-start">
                  <span class="w-2 h-2 bg-purple-500 rounded-full mr-3 mt-2"></span>
                  åºƒã„ãƒªãƒ“ãƒ³ã‚°ã§ã¿ã‚“ãªã§éã”ã›ã‚‹
                </li>
                <li class="flex items-start">
                  <span class="w-2 h-2 bg-purple-500 rounded-full mr-3 mt-2"></span>
                  ã‚­ãƒƒãƒãƒ³ã§ã¿ã‚“ãªã§æ–™ç†ã‚’ä½œã‚Œã‚‹
                </li>
                <li class="flex items-start">
                  <span class="w-2 h-2 bg-purple-500 rounded-full mr-3 mt-2"></span>
                  é™ã‹ãªç’°å¢ƒã§ã‚†ã£ãã‚Šéã”ã›ã‚‹
                </li>
              </ul>
            </div>
          </div>

          <div class="bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded relative" role="alert">
            <strong class="font-bold">æ³¨æ„ï¼</strong>
            <span class="block sm:inline">ã‚¿ã‚ªãƒ«ãƒ»æ­¯ãƒ–ãƒ©ã‚·ã‚’æŒå‚ã™ã‚‹ã“ã¨ã‚’å¿˜ã‚Œãªã„ã§ãã ã•ã„ã€‚</span>
          </div>

          <div class="p-10"></div>
          
          <div class="text-center">
            <a 
              href="/accommodation/" 
              class="inline-flex items-center px-8 py-4 bg-purple-600 text-white rounded-full hover:bg-purple-700 transition-colors font-semibold text-lg transform hover:scale-105"
            >
              <svg class="w-6 h-6 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
              </svg>
              è©³ç´°æƒ…å ±ã‚’è¦‹ã‚‹
            </a>
          </div>
        </div>
      </section>
    )}

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <footer class="text-center py-16">
      <div class="bg-gradient-to-r from-blue-600 to-purple-600 rounded-3xl p-8 text-white">
        <h3 class="text-3xl font-bold mb-4">ğŸ—» {info.data.title}</h3>
        <p class="text-xl opacity-90">ç´ æ™´ã‚‰ã—ã„æ€ã„å‡ºã‚’ä½œã‚Šã¾ã—ã‚‡ã†ï¼</p>

      </div>
    </footer>
  </div>
</Layout>

<style>
  @keyframes fade-in {
    from { opacity: 0; transform: translateY(30px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  @keyframes fade-in-delay {
    from { opacity: 0; transform: translateY(30px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  @keyframes fade-in-delay-2 {
    from { opacity: 0; transform: translateY(30px); }
    to { opacity: 1; transform: translateY(0); }
  }
  
  .animate-fade-in {
    animation: fade-in 1s ease-out;
  }
  
  .animate-fade-in-delay {
    animation: fade-in-delay 1s ease-out 0.3s both;
  }
  
  .animate-fade-in-delay-2 {
    animation: fade-in-delay-2 1s ease-out 0.6s both;
  }
</style>
